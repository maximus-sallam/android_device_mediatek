ifndef KATI

MTK_SOONG_VARIABLES := $(MTK_PTGEN_OUT_DIR)/soong/mtk_soong.config

MTK_SOONG_VARIABLES_TMP := $(MTK_SOONG_VARIABLES).$$$$

$(MTK_SOONG_VARIABLES): PRIVATE_PROJECT_CONFIG := $(MTK_TARGET_PROJECT_FOLDER)/ProjectConfig.mk
$(MTK_SOONG_VARIABLES): $(MTK_TARGET_PROJECT_FOLDER)/ProjectConfig.mk
$(MTK_SOONG_VARIABLES): FORCE
	$(hide) mkdir -p $(dir $@)
	$(hide) ( \
	cat $(PRIVATE_PROJECT_CONFIG); \
	echo "PRODUCT_LOCALES = $(PRODUCT_LOCALES)"; \
	$(foreach x,$(MTK_PROJECTCONFIG_OVERRIDE),echo "$(x)";) \
	echo "MTK_TARGET_PROJECT = $(MTK_TARGET_PROJECT)"; \
	echo "MTK_BASE_PROJECT = $(MTK_BASE_PROJECT)"; \
	echo "PRODUCTS = $(PRODUCTS)"; \
	echo "TARGET_ARCH = $(TARGET_ARCH)"; \
	echo "TARGET_BOARD_PLATFORM = $(TARGET_BOARD_PLATFORM)") > $(MTK_SOONG_VARIABLES_TMP); \
	if ! cmp -s $(MTK_SOONG_VARIABLES_TMP) $(MTK_SOONG_VARIABLES); then \
	  mv $(MTK_SOONG_VARIABLES_TMP) $(MTK_SOONG_VARIABLES); \
	else \
	  rm $(MTK_SOONG_VARIABLES_TMP); \
	fi

$(MTK_PTGEN_OUT_DIR)/soong/soong.variables: $(MTK_SOONG_VARIABLES)

endif
